<h2 class="title">Task To-do List<h2>

<button class="add-new-button"><%= link_to "Add a new task", new_task_path, class: "add-new-task" %></button>

<% if @tasks.length > 0 %>
  <ol>
    <% @tasks.each do |task| %>
      <li class="<%= task.completed_at ? "completed": ""%>">
        <div class="task-info">
          <p class="completed-task"><%= task.name %></p>
          <p><%= task.description %></p>
          <p class="<%= task.completed_at ? "completed-show": "no-completed-show"%>">
            Completed at <%=task.completed_at%>
          </p>
        </div>
          <button class="task-action"><%= link_to "Edit", edit_task_path(task.id), class: "add-new-task" %></button>
          <button class="task-action">
            <%= link_to "Delete", 
              task_path(task.id), 
              class: "add-new-task",
              method: :delete,
              data: { confirm: "Are you sure you want to delete this task?" }
            %>
          </button>
         <button class="task-action">
            <%=
              task.completed_at ?
              (link_to "Mark Uncomplete", mark_uncomplete_path(task.id), class: "add-new-task", method: :post) :
              (link_to "Mark Complete", mark_complete_path(task.id), class: "add-new-task", method: :post )
            %>
          </button>
      </li>
    <% end %>
  </ol>
  <% else %>
    <h2>No Tasks Today!</h2>
<% end %>